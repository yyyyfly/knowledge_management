# 项目问题管理功能部署说明

## 📋 **功能概述**

在项目执行页面新增了"问题管理"功能，允许用户记录、跟踪和处理项目执行过程中遇到的各类问题。

## ✅ **实现功能**

### 1. 问题记录
- ✅ 记录项目问题（技术问题、需求问题、设计问题、其他问题）
- ✅ 设置问题优先级（紧急、高、中、低）
- ✅ 关联具体项目
- ✅ 指定问题负责人
- ✅ 详细的问题描述

### 2. 问题跟踪
- ✅ 实时查看问题列表
- ✅ 按项目、状态、优先级筛选问题
- ✅ 搜索问题标题和描述
- ✅ 问题状态管理（待处理、处理中、已解决、已关闭）

### 3. 问题处理
- ✅ 记录问题解决方案
- ✅ 标记问题为已解决
- ✅ 显示问题解决时间
- ✅ 编辑和删除问题

## 🗄️ **数据库部署**

### 1. 执行SQL脚本

运行以下SQL文件创建问题表：

```bash
mysql -u root -p knowledge_management < backed/src/main/resources/db/km_project_issue.sql
```

或直接在MySQL中执行：

```sql
USE knowledge_management;

CREATE TABLE `km_project_issue` (
  `id` BIGINT NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `project_id` BIGINT NOT NULL COMMENT '关联项目ID',
  `issue_title` VARCHAR(200) NOT NULL COMMENT '问题标题',
  `issue_description` TEXT COMMENT '问题描述',
  `issue_type` VARCHAR(20) NOT NULL COMMENT '问题类型：technical-技术问题, requirement-需求问题, design-设计问题, other-其他问题',
  `priority` VARCHAR(20) NOT NULL DEFAULT 'medium' COMMENT '优先级：low-低, medium-中, high-高, urgent-紧急',
  `status` VARCHAR(20) NOT NULL DEFAULT 'open' COMMENT '问题状态：open-待处理, in_progress-处理中, resolved-已解决, closed-已关闭',
  `reporter` VARCHAR(64) NOT NULL COMMENT '问题报告人',
  `assignee` VARCHAR(64) COMMENT '问题负责人',
  `solution` TEXT COMMENT '解决方案',
  `resolve_time` DATETIME COMMENT '解决时间',
  `rec_creator` VARCHAR(64) NOT NULL DEFAULT 'system' COMMENT '创建人',
  `rec_create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `rec_revisor` VARCHAR(64) NOT NULL DEFAULT 'system' COMMENT '修订人',
  `rec_revise_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修订时间',
  `arch_flag` INT(1) NOT NULL DEFAULT 1 COMMENT '归档标志:0-已删除,1-正常',
  PRIMARY KEY (`id`),
  KEY `idx_project_id` (`project_id`),
  KEY `idx_issue_type` (`issue_type`),
  KEY `idx_status` (`status`),
  KEY `idx_priority` (`priority`),
  KEY `idx_reporter` (`reporter`),
  KEY `idx_arch_flag` (`arch_flag`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='项目问题表';
```

### 2. 验证表创建

```sql
-- 查看表结构
DESC km_project_issue;

-- 查看索引
SHOW INDEX FROM km_project_issue;
```

## 🔧 **后端部署**

### 1. 新增文件清单

```
backed/
├── src/main/java/com/knowledge/
│   ├── entity/ProjectIssue.java           # 问题实体类
│   ├── mapper/ProjectIssueMapper.java     # 问题Mapper接口
│   ├── service/ProjectIssueService.java   # 问题服务类
│   └── controller/ProjectIssueController.java  # 问题控制器
├── src/main/resources/
│   ├── mapper/ProjectIssueMapper.xml      # 问题SQL映射
│   └── db/km_project_issue.sql           # 问题表SQL
```

### 2. 编译后端

```bash
cd backed
mvn clean compile
```

### 3. 重启后端服务

```bash
mvn spring-boot:run
```

## 💻 **前端部署**

### 1. 修改文件

- `fronted/src/views/daily/ProjectRecord.vue`（已更新）
  - 添加问题管理卡片
  - 添加问题记录界面
  - 添加问题处理界面
  - 集成问题管理API

### 2. 无需额外安装依赖

项目已包含所有必要的依赖。

### 3. 重启前端

```bash
cd fronted
npm run dev
```

## 📊 **API接口汇总**

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 创建问题 | POST | `/project/issue` | 记录新问题 |
| 获取所有问题 | GET | `/project/issue/list` | 获取问题列表 |
| 根据项目获取问题 | GET | `/project/issue/project/{projectId}` | 按项目查询 |
| 根据状态获取问题 | GET | `/project/issue/status/{status}` | 按状态查询 |
| 获取问题详情 | GET | `/project/issue/{id}` | 获取单个问题 |
| 更新问题 | PUT | `/project/issue/{id}` | 更新问题信息 |
| 更新问题状态 | PUT | `/project/issue/{id}/status` | 更新状态 |
| 处理问题 | PUT | `/project/issue/{id}/resolve` | 标记为已解决 |
| 删除问题 | DELETE | `/project/issue/{id}` | 逻辑删除问题 |

## 🎯 **使用说明**

### 1. 访问问题管理

1. 进入系统，点击侧边栏"项目执行"
2. 在页面顶部看到三个操作卡片
3. 点击"问题管理"（橙色卡片）

### 2. 记录问题

1. 点击"记录问题"按钮
2. 填写问题信息：
   - **关联项目**：选择相关项目
   - **问题标题**：简要描述问题
   - **问题描述**：详细说明问题情况
   - **问题类型**：技术/需求/设计/其他
   - **优先级**：紧急/高/中/低
   - **负责人**：可选，指定处理人员
3. 点击"记录问题"提交

### 3. 筛选和搜索

- **搜索框**：输入关键词搜索问题标题或描述
- **项目筛选**：选择特定项目的问题
- **状态筛选**：待处理/处理中/已解决/已关闭
- **优先级筛选**：紧急/高/中/低

### 4. 处理问题

1. 在问题列表中找到需要处理的问题
2. 点击✅按钮打开处理界面
3. 填写解决方案
4. 确认处理人员
5. 点击"标记为已解决"

### 5. 编辑和删除

- **编辑**：点击✏️按钮，修改问题信息
- **删除**：点击🗑️按钮，删除问题记录

## 🎨 **界面特色**

### 1. 问题优先级可视化

- 🔴 **紧急**：红色背景，醒目提示
- 🟠 **高**：橙色背景，重点关注
- 🟡 **中**：黄色背景，一般优先级
- ⚪ **低**：灰色背景，普通问题

### 2. 问题状态标识

- **待处理**：灰色标签
- **处理中**：蓝色标签
- **已解决**：绿色标签，显示解决方案
- **已关闭**：深灰色标签

### 3. 问题类型图标

- 💻 **技术问题**：技术类图标
- 📋 **需求问题**：需求类图标
- 🎨 **设计问题**：设计类图标
- 📌 **其他问题**：通用图标

## 🔍 **数据示例**

### 创建问题请求示例

```json
{
  "projectId": 1,
  "issueTitle": "登录页面响应缓慢",
  "issueDescription": "用户反馈登录页面加载时间超过5秒，需要优化性能",
  "issueType": "technical",
  "priority": "high",
  "assignee": "张三"
}
```

### 处理问题请求示例

```json
{
  "solution": "优化了数据库查询，添加了Redis缓存，登录时间缩短至1秒内",
  "assignee": "李四"
}
```

## 🐛 **常见问题**

### 1. 问题列表为空

- 确认数据库表已创建
- 检查后端API是否正常运行
- 查看浏览器控制台是否有错误

### 2. 创建问题失败

- 确认项目ID存在
- 检查必填字段是否完整
- 查看后端日志排查错误

### 3. 筛选不生效

- 刷新页面重新加载数据
- 清空筛选条件重试
- 检查数据格式是否正确

## 📅 **版本信息**

- **功能版本**：v1.9.0
- **实现日期**：2025-10-09
- **涉及文件**：
  - 数据库：1个表
  - 后端：6个文件（Entity、Mapper、Service、Controller）
  - 前端：1个文件（ProjectRecord.vue）

## 💡 **未来扩展建议**

1. **问题分析**
   - 问题统计报表
   - 问题趋势分析
   - 高频问题识别

2. **协作功能**
   - 问题评论功能
   - @提醒相关人员
   - 问题关注/订阅

3. **自动化**
   - 问题自动分类
   - 智能推荐解决方案
   - 问题预警机制

4. **集成功能**
   - 与任务系统联动
   - 生成问题分析报告
   - 导出问题清单

---

**总结**：项目问题管理功能已完整实现，涵盖问题的记录、跟踪、筛选、处理等完整生命周期，为项目执行提供了强有力的问题管理支持。


