# 六大笔记配置管理UI回滚清单

## 说明
之前错误地在六大笔记页面添加了配置管理UI，需要全部回滚。
正确的实现是在 MaterialRecord.vue 中管理配置。

## 需要回滚的修改

### 通用回滚步骤（每个文件）

**Step 1: 移除template中的配置UI**
搜索并删除：
```vue
<!-- XX笔记配置 -->
<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-8">
  ... 整个配置管理区域
</div>
```

**Step 2: 移除导入**
搜索并删除：
```typescript
import { getConfigsByNoteType, createConfig, updateConfig as updateConfigAPI, deleteConfig as deleteConfigAPI, type NoteConfig } from '@/api/noteConfig'
```

**Step 3: 移除变量**
搜索并删除类似：
```typescript
const configSubjects = ref<NoteConfig[]>([])
const configCourses = ref<NoteConfig[]>([])
const showAddConfigModal = ref(false)
const currentConfigType = ref<'subject' | 'course'>('subject')
const newConfigName = ref('')
```

**Step 4: 移除函数**
搜索并删除类似：
```typescript
const loadConfigs = async () => { ... }
const openAddConfigModal = (type: ...) => { ... }
const addConfig = async () => { ... }
const updateConfig = async (config: ...) => { ... }
const deleteConfig = async (id: ...) => { ... }
```

**Step 5: 修改onMounted和onActivated**
移除 `loadConfigs()` 调用：
```typescript
// 修改前：
onMounted(() => {
  loadNotes()
  loadConfigs()  // 删除这行
})

// 修改后：
onMounted(() => {
  loadNotes()
})
```

**Step 6: 移除弹窗**
搜索并删除template末尾的：
```vue
<!-- 添加配置弹窗 -->
<Transition name="modal-fade">
  ... 整个弹窗
</Transition>
```

## 回滚文件清单

### 1. ❌ StudyNotes.vue
**需要移除的关键词搜索：**
- `求学笔记配置`
- `configSubjects`
- `configCourses`
- `loadConfigs`
- `getConfigsByNoteType`
- `添加配置弹窗`

**回滚后保留：**
- `loadNotes()` - 加载笔记数据
- `onActivated()` - 页面激活时刷新
- 所有统计和展示功能

---

### 2. ❌ MemorizationNotes.vue
**需要移除的关键词搜索：**
- `背诵笔记配置`
- `configSubjects`
- `configCategories`
- `loadConfigs`
- `getConfigsByNoteType`
- `添加配置弹窗`

**回滚后保留：**
- `loadNotes()` - 加载笔记数据
- 所有背诵笔记的统计和展示功能

---

### 3. ❌ ExerciseNotes.vue
**需要移除的关键词搜索：**
- `刷题笔记配置`
- `configSubjects`
- `configSources`
- `loadConfigs`
- `getConfigsByNoteType`
- `添加配置弹窗`

**回滚后保留：**
- `loadNotes()` - 加载笔记数据
- 所有刷题笔记的统计和图表功能

---

### 4. ❌ PracticalNotes.vue
**需要移除的关键词搜索：**
- `实战笔记配置`
- `configDomains`
- `configTechStacks`
- `loadConfigs`
- `getConfigsByNoteType`
- `添加配置弹窗`

**回滚后保留：**
- `loadData()` - 加载笔记和模板数据
- 所有项目模板和实战笔记展示功能

---

### 5. ❌ FrameworkNotes.vue
**需要移除的关键词搜索：**
- `框架笔记配置`
- `configCategories`
- `configSubjects`
- `loadConfigs`
- `getConfigsByNoteType`
- `添加配置弹窗`

**回滚后保留：**
- `loadNotes()` - 加载笔记数据
- `updateCharts()` - 更新图表
- 所有框架笔记的统计和图表功能

---

### 6. ✅ FragmentNotes.vue
**保持现状** - 之前已正确实现配置管理，但需要确认是否也错误添加了

---

## 快速回滚方法

### 方法1: 手动回滚（推荐，确保准确）
1. 打开每个文件
2. 按照上述清单逐项搜索并删除
3. 确认删除后保存
4. 测试页面功能正常

### 方法2: Git回滚（如果有备份）
```bash
# 查看配置管理添加前的提交
git log --oneline fronted/src/views/materials/

# 回滚到正确的版本
git checkout <commit-hash> -- fronted/src/views/materials/StudyNotes.vue
git checkout <commit-hash> -- fronted/src/views/materials/MemorizationNotes.vue
git checkout <commit-hash> -- fronted/src/views/materials/ExerciseNotes.vue
git checkout <commit-hash> -- fronted/src/views/materials/PracticalNotes.vue
git checkout <commit-hash> -- fronted/src/views/materials/FrameworkNotes.vue
```

## 验证清单

回滚完成后验证：

### 功能验证
- [ ] 六大笔记页面可以正常打开
- [ ] 笔记列表正常显示
- [ ] 统计数据正常显示
- [ ] 图表正常显示（如有）
- [ ] 筛选功能正常
- [ ] 搜索功能正常
- [ ] 没有控制台错误
- [ ] 没有多余的配置管理UI

### 代码验证
- [ ] 没有`import.*noteConfig`
- [ ] 没有`loadConfigs`函数
- [ ] 没有`configSubjects`等配置变量
- [ ] 没有"添加配置弹窗"
- [ ] onMounted只调用`loadNotes()`
- [ ] 没有编译错误

## 注意事项

1. **不要删除核心功能**
   - `loadNotes()` 必须保留
   - `onActivated()` 必须保留
   - 所有展示和统计功能必须保留

2. **确认删除范围**
   - 只删除配置管理相关代码
   - 不要删除笔记数据处理代码

3. **测试充分**
   - 每回滚一个文件后立即测试
   - 确认没有破坏原有功能

4. **保持一致**
   - 所有六大笔记页面都应该是纯浏览功能
   - 配置管理统一在MaterialRecord.vue

---

**优先级**: ⭐⭐⭐⭐⭐ 高优先级  
**预计时间**: 30-45分钟（5个文件，每个6-9分钟）  
**建议**: 逐个文件回滚并测试，确保每个都正确


