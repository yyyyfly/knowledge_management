# é—®é¢˜ç®¡ç†å­—æ®µç®€åŒ–è¯´æ˜

## ğŸ“ ä¿®æ”¹èƒŒæ™¯

ç”±äºæœ¬ç³»ç»Ÿæ˜¯ä¸ªäººä½¿ç”¨çš„çŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼Œé—®é¢˜éƒ½æ˜¯ç”±ç”¨æˆ·è‡ªå·±æå‡ºå¹¶è‡ªå·±è§£å†³ï¼Œå› æ­¤ä¸éœ€è¦"é—®é¢˜æŠ¥å‘Šäºº"å’Œ"é—®é¢˜è´Ÿè´£äºº"ç­‰å¤šäººåä½œç›¸å…³çš„å­—æ®µã€‚

## ğŸ—‘ï¸ åˆ é™¤çš„å­—æ®µ

### æ•°æ®åº“è¡¨ `km_project_issue`
- `reporter` VARCHAR(64) - é—®é¢˜æŠ¥å‘Šäººã€å·²åˆ é™¤ã€‘
- `assignee` VARCHAR(64) - é—®é¢˜è´Ÿè´£äººã€å·²åˆ é™¤ã€‘
- `idx_reporter` ç´¢å¼•ã€å·²åˆ é™¤ã€‘

## ğŸ“‹ ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### 1. æ•°æ®åº“å±‚
- `backed/src/main/resources/db/km_project_issue.sql`
  - åˆ é™¤ `reporter` å’Œ `assignee` å­—æ®µå®šä¹‰
  - åˆ é™¤ `idx_reporter` ç´¢å¼•

### 2. å®ä½“å±‚
- `backed/src/main/java/com/knowledge/entity/ProjectIssue.java`
  - åˆ é™¤ `reporter` å±æ€§
  - åˆ é™¤ `assignee` å±æ€§

### 3. Mapperå±‚
- `backed/src/main/java/com/knowledge/mapper/ProjectIssueMapper.java`
  - ä¿®æ”¹ `resolveIssue` æ–¹æ³•ç­¾åï¼Œåˆ é™¤ `assignee` å‚æ•°

- `backed/src/main/resources/mapper/ProjectIssueMapper.xml`
  - `BaseResultMap`: åˆ é™¤ `reporter` å’Œ `assignee` çš„æ˜ å°„
  - `insert` è¯­å¥: åˆ é™¤ `reporter` å’Œ `assignee` å­—æ®µ
  - `update` è¯­å¥: åˆ é™¤ `assignee` å­—æ®µ
  - `resolveIssue` è¯­å¥: åˆ é™¤ `assignee` å­—æ®µ

### 4. Serviceå±‚
- `backed/src/main/java/com/knowledge/service/ProjectIssueService.java`
  - `createIssue` æ–¹æ³•: åˆ é™¤è®¾ç½® `reporter` çš„ä»£ç 
  - `resolveIssue` æ–¹æ³•: åˆ é™¤ `assignee` å‚æ•°

### 5. Controllerå±‚
- `backed/src/main/java/com/knowledge/controller/ProjectIssueController.java`
  - `resolveIssue` æ¥å£: åˆ é™¤ `assignee` å‚æ•°çš„å¤„ç†é€»è¾‘

### 6. å‰ç«¯
- âœ… å‰ç«¯ä»£ç å·²ç»æ²¡æœ‰ä½¿ç”¨è¿™äº›å­—æ®µ

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹æ¡ˆä¸€ï¼šæ–°éƒ¨ç½²ï¼ˆæ¨èï¼‰
å¦‚æœæ˜¯å…¨æ–°éƒ¨ç½²ï¼Œç›´æ¥æ‰§è¡Œæ›´æ–°åçš„ `km_project_issue.sql` å³å¯ã€‚

### æ–¹æ¡ˆäºŒï¼šå·²æœ‰æ•°æ®åº“
å¦‚æœæ•°æ®åº“å·²ç»åˆ›å»ºï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹ SQLï¼š

```sql
-- åˆ é™¤å­—æ®µå’Œç´¢å¼•
ALTER TABLE km_project_issue DROP INDEX idx_reporter;
ALTER TABLE km_project_issue DROP COLUMN reporter;
ALTER TABLE km_project_issue DROP COLUMN assignee;
```

ç„¶åé‡æ–°ç¼–è¯‘å¹¶é‡å¯åç«¯æœåŠ¡ã€‚

## âœ… éªŒè¯æ¸…å•

- [x] æ•°æ®åº“è¡¨ç»“æ„å·²ç®€åŒ–
- [x] åç«¯å®ä½“ç±»å·²æ›´æ–°
- [x] Mapperæ¥å£å’ŒXMLå·²æ›´æ–°
- [x] Serviceå±‚é€»è¾‘å·²ç®€åŒ–
- [x] Controlleræ¥å£å·²æ›´æ–°
- [x] å‰ç«¯ä»£ç æ— éœ€ä¿®æ”¹
- [x] ç³»ç»Ÿæ›´ç¬¦åˆä¸ªäººä½¿ç”¨åœºæ™¯

## ğŸ’¡ è®¾è®¡ç†å¿µ

**ç®€çº¦è€Œä¸ç®€å•**ï¼šåˆ é™¤å†—ä½™å­—æ®µï¼Œä¿æŒæ•°æ®ç»“æ„çš„ç®€æ´æ€§ï¼Œè®©ç³»ç»Ÿæ›´ä¸“æ³¨äºä¸ªäººçŸ¥è¯†ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½ã€‚

---

*ä¿®æ”¹æ—¶é—´ï¼š2025-10-09*
*ä¿®æ”¹åŸå› ï¼šç®€åŒ–ä¸ªäººä½¿ç”¨åœºæ™¯ä¸‹çš„ä¸å¿…è¦å­—æ®µ*


