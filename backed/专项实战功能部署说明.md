# 专项实战功能部署说明

## 功能概述

专项实战功能已完全开发完成，用于创建和管理针对特定场景（考试、项目、竞赛）的定制化训练方案。

## 部署步骤

### 1. 数据库部署

执行数据库脚本创建 `km_custom_practice` 表：

```bash
# 进入后端项目目录
cd backed

# 执行 SQL 脚本（在 MySQL 客户端中执行）
mysql -u your_username -p your_database < create_custom_practice_table.sql
```

或者在 MySQL 客户端中直接执行 `create_custom_practice_table.sql` 文件中的 SQL 语句。

### 2. 后端代码部署

后端代码已全部完成，包括：

- **实体类**: `backed/src/main/java/com/knowledge/entity/CustomPractice.java`
- **Mapper 接口**: `backed/src/main/java/com/knowledge/mapper/CustomPracticeMapper.java`
- **Mapper XML**: `backed/src/main/resources/mapper/CustomPracticeMapper.xml`
- **Service 层**: `backed/src/main/java/com/knowledge/service/CustomPracticeService.java`
- **Controller 层**: `backed/src/main/java/com/knowledge/controller/CustomPracticeController.java`

**重新编译并启动后端项目：**

```bash
# 进入后端项目目录
cd backed

# Maven 编译
mvn clean package

# 启动应用（或使用 IDE 启动）
java -jar target/knowledge-management-system.jar
```

### 3. 前端代码部署

前端代码已全部完成并启用，包括：

- **API 接口**: `fronted/src/api/customPractice.ts`
- **页面组件**: `fronted/src/views/materials/TrainingCenter.vue`

前端代码已经自动集成，无需额外操作。如果前端开发服务器正在运行，修改会自动热更新。

### 4. 验证部署

1. **后端 API 测试**：
   - 访问 `http://localhost:8080/api/custom-practice/list`（需要带上认证 token）
   - 应该返回空数组或已有的专项实战列表

2. **前端功能测试**：
   - 登录系统
   - 导航到 "主仪表盘 > 模拟实战" 页面
   - 尝试创建一个新的专项实战
   - 查看、编辑、删除功能是否正常

## API 接口说明

### 基础路径
```
/api/custom-practice
```

### 接口列表

| 方法 | 路径 | 说明 | 需要认证 |
|------|------|------|----------|
| GET | `/list` | 获取所有专项实战列表 | 是 |
| GET | `/{id}` | 根据ID获取专项实战详情 | 是 |
| POST | `/` | 创建新的专项实战 | 是 |
| PUT | `/` | 更新专项实战 | 是 |
| DELETE | `/{id}` | 删除专项实战（软删除） | 是 |

### 请求示例

**创建专项实战：**

```json
POST /api/custom-practice
Authorization: Bearer {token}
Content-Type: application/json

{
  "practiceName": "Spring Boot微服务项目实战",
  "scenarioType": "项目实战",
  "scenarioDetail": "电商系统微服务架构设计与实现",
  "difficulty": "困难",
  "background": "基于Spring Cloud的分布式电商系统",
  "description": "实现一个完整的微服务电商系统，包含用户、商品、订单、支付等模块",
  "targetSkills": "[\"Spring Boot\",\"Spring Cloud\",\"微服务架构\",\"分布式事务\"]",
  "techStack": "[\"Java\",\"Spring Boot 2.7\",\"Spring Cloud Alibaba\",\"MySQL\",\"Redis\",\"RabbitMQ\"]",
  "constraints": "[\"开发时间：2周\",\"团队规模：1-2人\",\"技术限制：必须使用Spring Cloud Alibaba\"]",
  "practiceContent": "[{\"title\":\"用户服务\",\"description\":\"实现用户注册、登录、个人信息管理\"},{\"title\":\"商品服务\",\"description\":\"实现商品的增删改查、分类管理、库存管理\"}]",
  "evaluationCriteria": "[{\"name\":\"功能完整性\",\"weight\":40,\"standard\":\"所有核心功能正常运行\"},{\"name\":\"代码质量\",\"weight\":30,\"standard\":\"代码规范、注释完整、无明显bug\"}]",
  "referenceMaterials": "[\"Spring Cloud官方文档\",\"分布式系统设计模式\"]",
  "timeLimit": 14400,
  "compatibilityNotes": "适合有Spring Boot基础的开发者，需要了解微服务概念",
  "tags": "SpringBoot,微服务,分布式,电商"
}
```

## 数据字段说明

| 字段名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| practiceName | String | 是 | 实战名称 |
| scenarioType | String | 是 | 场景类型（考试/项目/竞赛） |
| scenarioDetail | String | 否 | 场景详情 |
| difficulty | String | 否 | 难度等级（简单/中等/困难） |
| background | String | 否 | 背景说明 |
| description | String | 是 | 详细描述 |
| targetSkills | String | 否 | 目标技能点（JSON数组字符串） |
| techStack | String | 否 | 技术栈（JSON数组字符串） |
| constraints | String | 否 | 限制条件（JSON数组字符串） |
| practiceContent | String | 否 | 实战内容（JSON数组字符串） |
| evaluationCriteria | String | 否 | 评估标准（JSON数组字符串） |
| referenceMaterials | String | 否 | 参考资料（JSON数组字符串） |
| timeLimit | Integer | 否 | 建议完成时间（分钟） |
| compatibilityNotes | String | 否 | 兼容性说明 |
| tags | String | 否 | 标签（逗号分隔） |

## 常见问题

### Q1: 数据库表创建失败？
**A:** 检查 MySQL 版本是否支持，确保使用 utf8mb4 字符集。如果是 MySQL 5.7，脚本已经兼容。

### Q2: 前端显示"功能正在开发中"？
**A:** 检查前端代码是否是最新版本，`TrainingCenter.vue` 中的 API 调用应该已经启用（不再是注释状态）。

### Q3: 创建专项实战后列表不显示？
**A:** 检查：
1. 浏览器开发者工具的 Network 选项卡，查看 API 请求是否成功
2. 后端日志是否有报错
3. 数据库中 `km_custom_practice` 表是否有数据，且 `arch_flag=0`
4. 确认登录用户的 `rec_creator` 字段与数据记录匹配

### Q4: JSON 字段如何存储？
**A:** 目标技能点、实战内容、评估标准等字段在后端以 JSON 字符串格式存储。前端会自动处理 JSON 的序列化和反序列化。

示例：
```javascript
// 前端数组
targetSkillsList: ['Spring Boot', 'Redis', 'MySQL']

// 存储到数据库（自动转换）
targetSkills: '["Spring Boot","Redis","MySQL"]'
```

## 功能特性

### 已实现功能
- ✅ 专项实战的创建、查看、编辑、删除
- ✅ 详情弹窗展示完整信息
- ✅ 支持难度等级、时间限制、标签分类
- ✅ 数据隔离（用户只能看到自己创建的实战）
- ✅ 软删除机制

### 扩展建议
- 可以添加专项实战的收藏、分享功能
- 可以添加实战完成记录和成绩跟踪
- 可以添加批量导入导出功能
- 可以添加实战模板推荐功能

## 技术栈

- **后端**: Spring Boot + MyBatis + MySQL
- **前端**: Vue 3 + TypeScript + Tailwind CSS
- **认证**: JWT Token

## 更新日志

### v1.0.0 (2025-11-15)
- ✨ 初始版本发布
- ✨ 完整的 CRUD 功能
- ✨ 详情展示弹窗
- ✨ 字段兼容性处理（scenarioType/scenario）

---

部署完成后，请在模拟实战页面进行完整的功能测试。如有问题，请检查后端日志和浏览器控制台输出。








