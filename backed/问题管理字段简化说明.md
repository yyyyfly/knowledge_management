# 问题管理字段简化说明

## 📝 修改背景

由于本系统是个人使用的知识管理系统，问题都是由用户自己提出并自己解决，因此不需要"问题报告人"和"问题负责人"等多人协作相关的字段。

## 🗑️ 删除的字段

### 数据库表 `km_project_issue`
- `reporter` VARCHAR(64) - 问题报告人【已删除】
- `assignee` VARCHAR(64) - 问题负责人【已删除】
- `idx_reporter` 索引【已删除】

## 📋 修改的文件清单

### 1. 数据库层
- `backed/src/main/resources/db/km_project_issue.sql`
  - 删除 `reporter` 和 `assignee` 字段定义
  - 删除 `idx_reporter` 索引

### 2. 实体层
- `backed/src/main/java/com/knowledge/entity/ProjectIssue.java`
  - 删除 `reporter` 属性
  - 删除 `assignee` 属性

### 3. Mapper层
- `backed/src/main/java/com/knowledge/mapper/ProjectIssueMapper.java`
  - 修改 `resolveIssue` 方法签名，删除 `assignee` 参数

- `backed/src/main/resources/mapper/ProjectIssueMapper.xml`
  - `BaseResultMap`: 删除 `reporter` 和 `assignee` 的映射
  - `insert` 语句: 删除 `reporter` 和 `assignee` 字段
  - `update` 语句: 删除 `assignee` 字段
  - `resolveIssue` 语句: 删除 `assignee` 字段

### 4. Service层
- `backed/src/main/java/com/knowledge/service/ProjectIssueService.java`
  - `createIssue` 方法: 删除设置 `reporter` 的代码
  - `resolveIssue` 方法: 删除 `assignee` 参数

### 5. Controller层
- `backed/src/main/java/com/knowledge/controller/ProjectIssueController.java`
  - `resolveIssue` 接口: 删除 `assignee` 参数的处理逻辑

### 6. 前端
- ✅ 前端代码已经没有使用这些字段

## 🚀 部署步骤

### 方案一：新部署（推荐）
如果是全新部署，直接执行更新后的 `km_project_issue.sql` 即可。

### 方案二：已有数据库
如果数据库已经创建，需要执行以下 SQL：

```sql
-- 删除字段和索引
ALTER TABLE km_project_issue DROP INDEX idx_reporter;
ALTER TABLE km_project_issue DROP COLUMN reporter;
ALTER TABLE km_project_issue DROP COLUMN assignee;
```

然后重新编译并重启后端服务。

## ✅ 验证清单

- [x] 数据库表结构已简化
- [x] 后端实体类已更新
- [x] Mapper接口和XML已更新
- [x] Service层逻辑已简化
- [x] Controller接口已更新
- [x] 前端代码无需修改
- [x] 系统更符合个人使用场景

## 💡 设计理念

**简约而不简单**：删除冗余字段，保持数据结构的简洁性，让系统更专注于个人知识管理的核心功能。

---

*修改时间：2025-10-09*
*修改原因：简化个人使用场景下的不必要字段*


