# èŠ‚å‡æ—¥å®Œæ•´æ˜¾ç¤ºåŠŸèƒ½è¯´æ˜Ž

## é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆèŠ‚å‡æ—¥åœ¨æ—¥åŽ†ä¸Šæ˜¾ç¤ºä¸å…¨ï¼Œä¾‹å¦‚å›½åº†èŠ‚æ˜¯7å¤©å‡æœŸï¼Œä½†æ—¥åŽ†åªæ˜¾ç¤ºäº†éƒ¨åˆ†å¤©æ•°æˆ–æ²¡æœ‰æ˜¾ç¤ºã€‚

## æ ¹æœ¬åŽŸå› 

èŠ‚å‡æ—¥APIï¼ˆtimor.techï¼‰è¿”å›žçš„æ•°æ®æ ¼å¼ä¸­ï¼š
- **åªåŒ…å«èŠ‚æ—¥å½“å¤©çš„æ•°æ®**ï¼ˆå¦‚ï¼š2025-10-01 å›½åº†èŠ‚ï¼‰
- **é€šè¿‡ `rest` å­—æ®µæ ‡è®°è¿žä¼‘å¤©æ•°**ï¼ˆå¦‚ï¼šrest=7 è¡¨ç¤ºè¿žä¼‘7å¤©ï¼‰
- **åŽŸå§‹ä»£ç åªè¯»å–äº†èŠ‚æ—¥å½“å¤©**ï¼Œæ²¡æœ‰å±•å¼€æ•´ä¸ªå‡æœŸ

## è§£å†³æ–¹æ¡ˆ

### æ ¸å¿ƒæ”¹è¿›ï¼šèŠ‚å‡æ—¥æ‰©å±•é€»è¾‘

ä¿®æ”¹ `loadHolidays()` å‡½æ•°ï¼Œå¢žåŠ èŠ‚å‡æ—¥æ‰©å±•é€»è¾‘ï¼š

```javascript
// æ‰©å±•èŠ‚å‡æ—¥ï¼šä¸ä»…åŒ…æ‹¬èŠ‚æ—¥å½“å¤©ï¼Œè¿˜åŒ…æ‹¬æ•´ä¸ªå‡æœŸ
const expandedHolidays = []

Object.entries(data.holiday || {}).forEach(([date, info]) => {
  const baseDate = new Date(date)
  const restDays = info.rest || 1 // è¿žä¼‘å¤©æ•°
  
  // æ·»åŠ èŠ‚æ—¥å½“å¤©
  expandedHolidays.push({
    date,
    name: info.name,
    type: info.holiday ? 'æ³•å®šå‡æ—¥' : 'èŠ‚æ—¥',
    isHoliday: info.holiday,
    wage: info.wage
  })
  
  // å¦‚æžœæ˜¯æ³•å®šå‡æ—¥ä¸”æœ‰è¿žä¼‘ï¼Œæ·»åŠ åŽç»­å‡æœŸå¤©æ•°
  if (info.holiday && restDays > 1) {
    for (let i = 1; i < restDays; i++) {
      const nextDay = new Date(baseDate)
      nextDay.setDate(baseDate.getDate() + i)
      const nextDateStr = nextDay.toISOString().split('T')[0]
      
      expandedHolidays.push({
        date: nextDateStr,
        name: `${info.name}å‡æœŸ`,
        type: 'æ³•å®šå‡æ—¥',
        isHoliday: true,
        wage: info.wage
      })
    }
  }
})
```

### APIæ•°æ®ç¤ºä¾‹

**è¾“å…¥**ï¼ˆAPIè¿”å›žï¼‰ï¼š
```json
{
  "2025-10-01": {
    "holiday": true,
    "name": "å›½åº†èŠ‚",
    "wage": 3,
    "rest": 7
  }
}
```

**è¾“å‡º**ï¼ˆæ‰©å±•åŽï¼‰ï¼š
```javascript
[
  { date: '2025-10-01', name: 'å›½åº†èŠ‚', type: 'æ³•å®šå‡æ—¥', isHoliday: true },
  { date: '2025-10-02', name: 'å›½åº†èŠ‚å‡æœŸ', type: 'æ³•å®šå‡æ—¥', isHoliday: true },
  { date: '2025-10-03', name: 'å›½åº†èŠ‚å‡æœŸ', type: 'æ³•å®šå‡æ—¥', isHoliday: true },
  { date: '2025-10-04', name: 'å›½åº†èŠ‚å‡æœŸ', type: 'æ³•å®šå‡æ—¥', isHoliday: true },
  { date: '2025-10-05', name: 'å›½åº†èŠ‚å‡æœŸ', type: 'æ³•å®šå‡æ—¥', isHoliday: true },
  { date: '2025-10-06', name: 'å›½åº†èŠ‚å‡æœŸ', type: 'æ³•å®šå‡æ—¥', isHoliday: true },
  { date: '2025-10-07', name: 'å›½åº†èŠ‚å‡æœŸ', type: 'æ³•å®šå‡æ—¥', isHoliday: true }
]
```

## æ•ˆæžœå±•ç¤º

### ä¿®å¤å‰
- 10æœˆ1æ—¥ï¼šðŸŽ‰ å›½åº†èŠ‚
- 10æœˆ2æ—¥ï¼šï¼ˆæ— æ˜¾ç¤ºï¼‰
- 10æœˆ3æ—¥ï¼šï¼ˆæ— æ˜¾ç¤ºï¼‰
- ...

### ä¿®å¤åŽ
- 10æœˆ1æ—¥ï¼šðŸŽ‰ å›½åº†èŠ‚
- 10æœˆ2æ—¥ï¼šðŸŽ‰ å›½åº†èŠ‚å‡æœŸ
- 10æœˆ3æ—¥ï¼šðŸŽ‰ å›½åº†èŠ‚å‡æœŸ
- 10æœˆ4æ—¥ï¼šðŸŽ‰ å›½åº†èŠ‚å‡æœŸ
- 10æœˆ5æ—¥ï¼šðŸŽ‰ å›½åº†èŠ‚å‡æœŸ
- 10æœˆ6æ—¥ï¼šðŸŽ‰ å›½åº†èŠ‚å‡æœŸ
- 10æœˆ7æ—¥ï¼šðŸŽ‰ å›½åº†èŠ‚å‡æœŸ

## å…¶ä»–æ”¹è¿›

### 1. ç®€åŒ–è°ƒè¯•æ—¥å¿—
- ç§»é™¤äº†è¿‡å¤šçš„è°ƒè¯•ä¿¡æ¯
- ä¿ç•™å…³é”®çŠ¶æ€æ—¥å¿—ï¼š`âœ… 2025å¹´èŠ‚å‡æ—¥åŠ è½½æˆåŠŸ: Xä¸ªå‡æœŸ`

### 2. å“åº”å¼ä¼˜åŒ–
- ç¡®ä¿ `holidays` å˜åŒ–æ—¶ï¼Œæ—¥åŽ†è‡ªåŠ¨é‡æ–°è®¡ç®—
- ä½¿ç”¨ computed çš„å“åº”å¼ä¾èµ–è¿½è¸ª

### 3. UIä¸€è‡´æ€§
- èŠ‚æ—¥å½“å¤©æ˜¾ç¤ºèŠ‚æ—¥åç§°ï¼ˆå¦‚"å›½åº†èŠ‚"ï¼‰
- å‡æœŸå…¶ä½™å¤©æ•°æ˜¾ç¤º"èŠ‚æ—¥åç§°+å‡æœŸ"ï¼ˆå¦‚"å›½åº†èŠ‚å‡æœŸ"ï¼‰

## 2025å¹´æ³•å®šèŠ‚å‡æ—¥

æ ¹æ®å›½åŠ¡é™¢è§„å®šï¼Œ2025å¹´æ³•å®šèŠ‚å‡æ—¥å¦‚ä¸‹ï¼š

| èŠ‚æ—¥ | æ—¥æœŸ | è¿žä¼‘å¤©æ•° | æ˜¾ç¤ºæ•ˆæžœ |
|------|------|----------|----------|
| å…ƒæ—¦ | 1æœˆ1æ—¥ | 3å¤© | 1æœˆ1-3æ—¥æ˜¾ç¤º |
| æ˜¥èŠ‚ | 2æœˆ10æ—¥ | 9å¤© | 2æœˆ10-18æ—¥æ˜¾ç¤º |
| æ¸…æ˜ŽèŠ‚ | 4æœˆ4æ—¥ | 3å¤© | 4æœˆ4-6æ—¥æ˜¾ç¤º |
| åŠ³åŠ¨èŠ‚ | 5æœˆ1æ—¥ | 5å¤© | 5æœˆ1-5æ—¥æ˜¾ç¤º |
| ç«¯åˆèŠ‚ | 5æœˆ31æ—¥ | 3å¤© | 5æœˆ31æ—¥-6æœˆ2æ—¥æ˜¾ç¤º |
| ä¸­ç§‹èŠ‚ | 10æœˆ6æ—¥ | 3å¤© | 10æœˆ6-8æ—¥æ˜¾ç¤º |
| å›½åº†èŠ‚ | 10æœˆ1æ—¥ | 7å¤© | 10æœˆ1-7æ—¥æ˜¾ç¤º |

## æŠ€æœ¯ç»†èŠ‚

### æ—¥æœŸæ ¼å¼ç»Ÿä¸€
- APIè¿”å›žï¼š`YYYY-MM-DD`ï¼ˆå¦‚ `2025-10-01`ï¼‰
- å‰ç«¯ä½¿ç”¨ï¼š`YYYY-MM-DD`ï¼ˆç¡®ä¿ä¸€è‡´æ€§ï¼‰
- Dateå¯¹è±¡è½¬æ¢ï¼š`toISOString().split('T')[0]`

### å‡æœŸæ‰©å±•ç®—æ³•
1. è¯»å–èŠ‚æ—¥å½“å¤©çš„ `rest` å­—æ®µ
2. å¾ªçŽ¯ç”ŸæˆåŽç»­ `rest - 1` å¤©
3. æ¯å¤©ä½¿ç”¨ `Date.setDate()` é€’å¢ž
4. è½¬æ¢ä¸º `YYYY-MM-DD` æ ¼å¼
5. æŽ’åºç¡®ä¿æ—¥æœŸé¡ºåº

### æ€§èƒ½è€ƒè™‘
- æ‰©å±•æ“ä½œåœ¨ API æ•°æ®åŠ è½½æ—¶ä¸€æ¬¡æ€§å®Œæˆ
- é¿å…åœ¨æ¸²æŸ“æ—¶åŠ¨æ€è®¡ç®—
- ä½¿ç”¨ computed ç¼“å­˜æ—¥åŽ†ç½‘æ ¼æ•°æ®

## æµ‹è¯•å»ºè®®

1. **éªŒè¯èŠ‚å‡æ—¥æ˜¾ç¤º**ï¼š
   - æ£€æŸ¥10æœˆ1-7æ—¥æ˜¯å¦éƒ½æ˜¾ç¤ºå›½åº†èŠ‚æ ‡è®°
   - æ£€æŸ¥æ˜¥èŠ‚ã€åŠ³åŠ¨èŠ‚ç­‰é•¿å‡æ˜¯å¦å®Œæ•´æ˜¾ç¤º

2. **è·¨æœˆèŠ‚å‡æ—¥**ï¼š
   - ç«¯åˆèŠ‚ï¼ˆ5æœˆ31æ—¥-6æœˆ2æ—¥ï¼‰è·¨æœˆæ˜¾ç¤º
   - ç¡®ä¿æœˆä»½åˆ‡æ¢æ—¶æ­£ç¡®åŠ è½½

3. **æŽ§åˆ¶å°éªŒè¯**ï¼š
   - åˆ·æ–°é¡µé¢åŽæŸ¥çœ‹ï¼š`âœ… 2025å¹´èŠ‚å‡æ—¥åŠ è½½æˆåŠŸ: Xä¸ªå‡æœŸ`
   - æ£€æŸ¥æ€»æ•°æ˜¯å¦åŒ…å«æ‰©å±•åŽçš„å‡æœŸå¤©æ•°

## éƒ¨ç½²è¯´æ˜Ž

åªéœ€æ›´æ–°å‰ç«¯ä»£ç ï¼Œæ— éœ€æ•°æ®åº“æˆ–åŽç«¯å˜æ›´ï¼š
```bash
cd fronted
# å¼€å‘çŽ¯å¢ƒï¼šåˆ·æ–°æµè§ˆå™¨å³å¯
# ç”Ÿäº§çŽ¯å¢ƒï¼šnpm run build åŽé‡æ–°éƒ¨ç½²
```

## å·²çŸ¥é—®é¢˜

### è°ƒä¼‘å·¥ä½œæ—¥
- API å¯èƒ½æ ‡è®°æŸäº›å‘¨æœ«ä¸ºå·¥ä½œæ—¥ï¼ˆè°ƒä¼‘ï¼‰
- å½“å‰ç‰ˆæœ¬æœªå¤„ç†è°ƒä¼‘é€»è¾‘
- å»ºè®®åŽç»­ç‰ˆæœ¬å¢žåŠ "å·¥ä½œæ—¥"æ ‡è®°

### å¹´ä»½åˆ‡æ¢
- åˆ‡æ¢åˆ°ä¸åŒå¹´ä»½æ—¶ä¼šé‡æ–°åŠ è½½è¯¥å¹´ä»½çš„èŠ‚å‡æ—¥
- å·²åœ¨ `previousMonth()` å’Œ `nextMonth()` ä¸­å¤„ç†

## ç›¸å…³æ–‡ä»¶

- `fronted/src/views/headquarters/SystemDecisions.vue` - ä¸»è¦ä¿®æ”¹æ–‡ä»¶
- `fronted/test-holiday-api.html` - APIæµ‹è¯•é¡µé¢ï¼ˆå¯ç”¨äºŽéªŒè¯APIæ•°æ®æ ¼å¼ï¼‰

